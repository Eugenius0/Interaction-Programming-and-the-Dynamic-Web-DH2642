import{e as n}from"./index-6400038e.js";import{w as d,c as m,a as e}from"./mockFetch-ba9030b0.js";import{g as _}from"./filesToTest-e54ca7e1.js";import"./shim-7e3475d3.js";import"./util-004fc0f1.js";const w="",D=await _(`/src/${w}dishSource.js`);let f,o;D?.getDishDetails&&(f=D.getDishDetails);D?.getMenuDetails&&(o=D.getMenuDetails);describe("TW2.1.3 API call: getMenuDetails [vue](/tw2.1.3.html) [react](/tw2.1.3-react.html)",function(){this.timeout(2e5);function h(i,r,t,s,u){it(i,async function(){o||this.skip(),this._runnable.title=this._runnable.title.replace("(export to enable)","");const c=await d(e,r);n(c,"getMenuDetails expected to return a Promise that resolves to an array of dishes").to.be.an("array"),n(c.map(l=>l.id),"getMenuDetails array expected to contain dishes with the given ids").to.deep.equal(t.ids);try{m(e.lastFetch,e.lastParam,[t.hash],s)}catch(l){if(l.message.indexOf("unexpected query string parameter-value ids=")!=-1)m(e.lastFetch,e.lastParam,[t.hash],u);else throw l}}).timeout(4e3)}h("getMenuDetails test (export to enable)",function(){return o([1445969,601651])},{ids:[1445969,601651],hash:-1115178555},[870248148],[-3987170]),it("getMenuDetails promise rejects if the underlying fetch() rejects",async function(){o||this.skip();let r,t;try{await d(function(u,a){try{m(u,a,[-1115178555],[-1350703509])}catch(c){t=c}return t?Promise.resolve({ok:!0,status:200,json(){return Promise.resolve({id:-1})}}):Promise.resolve({ok:!1,status:404,json(){return Promise.resolve({msg:"dummy error dish not found"})}})},function(){return o(["undefined"])})}catch(s){r=s}if(t)throw t;n(r,"getMenuDetails(bad_param) must reject").to.be.ok}).timeout(4e3)});describe("TW2.1.4 API call:  getDishDetails [vue](/tw2.1.4.html) [react](/tw2.1.4-react.html)",function(){this.timeout(2e5);function h(i,r,t,s){it(i,async function(){f||this.skip();const a=await d(e,r);n(a,"getDishDetails expected to return a Promise that resolves to a dish object").to.be.ok,n(a.id,"getDishDetails expected to return a dish with the given id").to.equal(t.id),m(e.lastFetch,e.lastParam,[t.hash],s)}).timeout(4e3)}h("getDishDetails promise #1",function(){return f(1445969)},{id:1445969,hash:-1115178555},[1436951091]),h("getDishDetails promise #2",function(){return f(601651)},{id:601651,hash:-1115178555},[-1061209600])});
